## 概述
本文是net_traffic driver的设计文档，所有有关内核中的处理都在此处进行了说明

driver在本项目中至关重要，是研究网络流量的数据最终来源，driver负责获取在设备上接收和发送的网络数据流，经过一些处理和组织，形成易于上层应用接收和分析的数据结构。当然，在linux系统中，要获取网络数据流量的方式有多种，例如使用RAW_SOCKET绑定具体协议，或者经由专门的抓包软件如tcmdump将数据获取上来，应用程序直接拿来用，为什么没有选择这些看起来更加便捷的方式呢？有以下几方面的考虑：

1. 专有的抓包程序或者RAW_SOCKET方式获取的数据，并不易于本项目的app进行分析，仍然要进行额外的处理
2. 这些方式似乎不能够抓取到所有的数据包，而本项目需要尽可能抓取到数据包的全貌
3. 实时性考虑

## 整体架构
![](https://github.com/awokezhou/net_traffic/tree/master/doc/nt_drv_01.png)

